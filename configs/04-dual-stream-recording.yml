# Phase 4: Dual Stream + Recording
# Purpose: Add high-quality recording while keeping detection efficient
# - Sub stream (low quality) = AI detection
# - Main stream (high quality) = Recording

mqtt:
  enabled: false

ffmpeg:
  input_args: preset-rtsp-generic

objects:
  track:
    - person
    - car
    - dog
    - cat

# Global recording settings
record:
  enabled: true
  retain:
    days: 7        # Keep all recordings for 7 days
    mode: motion   # Only record when motion detected

cameras:
  front_door:
    enabled: true
    ffmpeg:
      inputs:
        # Main stream for recording (high quality)
        - path: rtsp://admin:YOUR_PASSWORD@CAMERA_IP:554/h265Preview_01_main
          roles:
            - record
        # Sub stream for detection (low quality = less CPU)
        - path: rtsp://admin:YOUR_PASSWORD@CAMERA_IP:554/h265Preview_01_sub
          roles:
            - detect
    detect:
      enabled: true
      width: 896
      height: 512
      fps: 5
    record:
      enabled: true
      alerts:
        retain:
          days: 14  # Keep important detections longer
        pre_capture: 5
        post_capture: 5
      detections:
        retain:
          days: 7
        pre_capture: 3
        post_capture: 3

# VERIFY: Check the Review tab for recorded clips
# Recordings should be high quality (main stream)
# Detection should be efficient (sub stream)
